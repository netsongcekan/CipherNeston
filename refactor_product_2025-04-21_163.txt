Refactor product search for API (low-priority)
